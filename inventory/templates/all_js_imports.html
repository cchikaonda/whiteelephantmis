{% load static %}
{% block js %}
<!-- jQuery -->
<script src="{% static '/plugins/jquery/jquery.min.js' %}"></script>
<script src="{% static '/plugins/bootstrap/js/bootstrap.min.js' %}"></script>

<!-- Bootstrap -->
<script src="{% static '/plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<!-- overlayScrollbars -->
<script src="{% static '/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js' %}"></script>
<!-- AdminLTE App -->
<!-- <script src="{% static '/dist/js/adminlte.js' %}"></script> -->
<!-- jQuery -->
<!-- Select2 -->
<script src="{% static '/plugins/select2/js/select2.full.min.js' %} "></script>
<!-- Bootstrap4 Duallistbox -->
<script src="{% static '/plugins/bootstrap4-duallistbox/jquery.bootstrap-duallistbox.min.js' %}"></script>
<!-- InputMask -->
<script src="{% static '/plugins/moment/moment.min.js'  %}"></script>
<script src="{% static '/plugins/inputmask/min/jquery.inputmask.bundle.min.js' %}"></script>
<!-- bootstrap color picker -->
<script src="{% static '/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js' %}"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="{% static '/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js' %}"></script>
<!-- Bootstrap Switch -->
<script src="{% static '/plugins/bootstrap-switch/js/bootstrap-switch.min.js' %}"></script>

<!-- OPTIONAL SCRIPTS -->
<script src="{% static '/dist/js/demo.js' %}"></script>

<!-- PAGE PLUGINS -->
<!-- jQuery Mapael -->
<script src="{% static '/plugins/jquery-mousewheel/jquery.mousewheel.js' %}"></script>  
<script src="{% static '/plugins/raphael/raphael.min.js' %}"></script>  
<script src="{% static '/plugins/jquery-mapael/jquery.mapael.min.js' %}"></script>  
<script src="{% static '/plugins/jquery-mapael/maps/usa_states.min.js' %}"></script>  
<!-- ChartJS -->
<script src="{% static '/plugins/chart.js/Chart.min.js' %}"></script>  
<!-- PAGE SCRIPTS -->
<!-- <script src="{% static '/dist/js/pages/dashboard2.js' %}"></script> -->
<!-- <script src="{% static '/custom_js/helpers.js' %}"></script> -->
<script src="{% static '/custom_js/current_date_time.js' %}"></script>
<script src="{% static '/custom_js/item_details.js' %}"></script>


<!-- DataTables -->
<script src="{% static '/plugins/datatables/jquery.dataTables.min.js' %}"></script>
<script src="{% static '/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js' %}"></script>
<script src="{% static '/plugins/datatables-responsive/js/dataTables.responsive.min.js' %}"></script>
<script src="{% static '/plugins/datatables-responsive/js/responsive.bootstrap4.min.js' %}"></script>

<script src="{% static '/plugins/datatables-buttons/js/dataTables.buttons.min.js' %}"></script>
<script src="{% static '/plugins/datatables-buttons/js/buttons.bootstrap4.min.js' %}"></script>
<script src="{% static '/plugins/jszip/jszip.min.js' %}"></script>
<script src="{% static '/plugins/pdfmake/pdfmake.min.js' %}"></script>
<script src="{% static '/plugins/pdfmake/vfs_fonts.js' %}"></script>
<script src="{% static '/plugins/datatables-buttons/js/buttons.html5.min.js' %}"></script>
<script src="{% static '/plugins/datatables-buttons/js/buttons.print.min.js' %}"></script>
<script src="{% static '/plugins/datatables-buttons/js/buttons.colVis.min.js' %}"></script>

<!-- AdminLTE App -->
<script src="{% static '/dist/js/adminlte.min.js' %}"></script>
<script src="{% static '/custom_js/tables_crud.js' %}"></script>
<script src="{% static '/plugins/intl-tel-input-master/build/js/intlTelInput.js' %}"></script>

<script src="{% static '/custom_js/pdf.js' %}"></script>
<script src="{% static '/custom_js/html2pdf.bundle.min.js' %}"></script>
<script src="{% static '/custom_js/excel.js' %}"></script>
<script src="{% static '/custom_js/table2excel.js' %}"></script>
<script src="{% static '/custom_js/current_date_time.js' %}"></script>

<script src="{% static '/plugins/toastr/toastr.min.js' %}"></script>
<script src="{% static '/plugins/sweetalert2/sweetalert2.all.min.js' %}"></script>

<script src="{% static '/plugins/jquery/jquery.bootstrap.modal.forms.js' %}"></script>

<!-- date-range-picker -->
<script src="{% static '/plugins/daterangepicker/daterangepicker.js' %}"></script>

<script src = "{% static '/js/tables/tablessetting.js' %}"></script>


<script>
  'use strict';
  var numberOfItems = $("#list-wrapper .list-item").length;
  var limitPerPage = 5;
  
  $("#list-wrapper .list-item:gt(" + (limitPerPage - 1) + ")").hide();
  var totalPages = Math.round(numberOfItems/limitPerPage);
  $(".pagination").append("<li class = 'current-page active '><a href = 'javascript:void(0)'>" + 1 + "</a></li>");

  for (var i = 2; i <= totalPages; i++){
    $(".pagination").append("<li class = 'current-page'><a href = 'javascript:void(0)'>" + i  + "</a></li>");
  }

  $(".pagination").append("<li id = 'next-page' ><a href = 'javascript:void(0)' aria-label='Next'> <span aria-hidden = 'true'>&raquo; </span></a></li>");

  $(".pagination li.current-page").on("click", function(){
    if ($(this).hasClass("active")){
      return false;
    }else{
      var currentPage = $(this).index();  
      $(".pagination li").removeClass("active");
      $(this).addClass("active");
      $("#list-wrapper .list-item").hide();
      var grandTotal = limitPerPage * currentPage;
      for (var i = grandTotal - limitPerPage; i < grandTotal; i++){
        $("#list-wrapper .list-item:eq( " + i + ")").show();
      }
    }
    
    });
  $("#next-page").on("click", function(){
    var currentPage = $(" .pagination li.active").index();
    if (currentPage == totalPages){
      return false;
    }else{
      currentPage++;
      $(".pagination li").removeClass("active");
      $("#list-wrapper .list-item").hide();

      var grandTotal = limitPerPage * currentPage;
      for (var i=grandTotal - limitPerPage; i < grandTotal; i++){
        $("#list-wrapper .list-item:eq(" + i + ")").show();
      }
        $(".pagination li.current-page:eq(" + (currentPage - 1) +")").addClass("active");

    }
  });

  $("#previous-page").on("click", function(){
    var currentPage = $(" .pagination li.active").index();
    if (currentPage == 1){
      return false;
    }else{
      currentPage--;
      $(".pagination li").removeClass("active");
      $("#list-wrapper .list-item").hide();

      var grandTotal = limitPerPage * currentPage;
      for (var i=grandTotal - limitPerPage; i < grandTotal; i++){
        $("#list-wrapper .list-item:eq(" + i + ")").show();
      }
        $(".pagination li.current-page:eq(" + (currentPage - 1) + ")").addClass("active");

    }
  });

</script>

<!-- script to increament and decreament values in input fields -->
<script>
    function increament(element) {
      let qtyBox = element.previousElementSibling;
      qtyBox.value = parseInt(qtyBox.value) + 1;
    }
</script>
<script>
    function decrement(textFieldId, decrementAmount) {
      var textField = document.getElementById(textFieldId);
      var currentValue = parseInt(textField.value);
      var newValue = currentValue - decrementAmount;
      if (newValue <0){
        newValue = 0;
      }
      textField.value = newValue;
    }
</script>

<!-- End scripts to increament and decreament values in input fields -->

<script>
    var input = document.querySelector("#phone_number");
    window.intlTelInput(input, {
    // any initialisation options go here
    });
</script>

<!--Activating Links Script-->
<script>
    $(function(){
      var current = location.pathname;
      $('#nav ul li a').each(function(){
        var $this = $(this);
        //if current paths is like this link, make it active
        if($this.attr('href').indexOf(current) !== -1){
          $this.addClass('active');
          
        }
      })
    })
</script>
<!--End Activating Navigation Links-->

<script>
  {% for msg in messages %}
    {% if msg.tags == 'info' %}
        Swal.fire(
        '{{msg}}',
        '',
        'info'
      );
    {% elif msg.tags == 'error' %}
        Swal.fire(
            '{{msg}}',
            '',
            'error'
          );
    {% elif msg.tags == 'success' %}
        Swal.fire(
            '{{msg}}',
            '',
            'success'
          );
    {% endif %}

  {% endfor %}
</script>


<script>
  $(function() {
    var Toast = Swal.mixin({
      toast: true,
      position: 'top-end',
      showConfirmButton: false,
      timer: 3000
    });

    $('.swalDefaultSuccess').click(function() {
      Toast.fire({
        icon: 'success',
        title: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
      })
    });
    $('.swalDefaultInfo').click(function() {
      Toast.fire({
        icon: 'info',
        title: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
      })
    });
    $('.swalDefaultError').click(function() {
      Toast.fire({
        icon: 'error',
        title: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
      })
    });
    $('.swalDefaultWarning').click(function() {
      Toast.fire({
        icon: 'warning',
        title: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
      })
    });
    $('.swalDefaultQuestion').click(function() {
      Toast.fire({
        icon: 'question',
        title: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
      })
    });

    $('.toastrDefaultSuccess').click(function() {
      toastr.success('Lorem ipsum dolor sit amet, consetetur sadipscing elitr.')
    });
    $('.toastrDefaultInfo').click(function() {
      toastr.info('Lorem ipsum dolor sit amet, consetetur sadipscing elitr.')
    });
    $('.toastrDefaultError').click(function() {
      toastr.error('Lorem ipsum dolor sit amet, consetetur sadipscing elitr.')
    });
    $('.toastrDefaultWarning').click(function() {
      toastr.warning('Lorem ipsum dolor sit amet, consetetur sadipscing elitr.')
    });

    $('.toastsDefaultDefault').click(function() {
      $(document).Toasts('create', {
        title: 'Toast Title',
        body: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
      })
    });
    $('.toastsDefaultTopLeft').click(function() {
      $(document).Toasts('create', {
        title: 'Toast Title',
        position: 'topLeft',
        body: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
      })
    });
    $('.toastsDefaultBottomRight').click(function() {
      $(document).Toasts('create', {
        title: 'Toast Title',
        position: 'bottomRight',
        body: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
      })
    });
    $('.toastsDefaultBottomLeft').click(function() {
      $(document).Toasts('create', {
        title: 'Toast Title',
        position: 'bottomLeft',
        body: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
      })
    });
    $('.toastsDefaultAutohide').click(function() {
      $(document).Toasts('create', {
        title: 'Toast Title',
        autohide: true,
        delay: 750,
        body: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
      })
    });
    $('.toastsDefaultNotFixed').click(function() {
      $(document).Toasts('create', {
        title: 'Toast Title',
        fixed: false,
        body: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
      })
    });
    $('.toastsDefaultFull').click(function() {
      $(document).Toasts('create', {
        body: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.',
        title: 'Toast Title',
        subtitle: 'Subtitle',
        icon: 'fas fa-envelope fa-lg',
      })
    });
    $('.toastsDefaultFullImage').click(function() {
      $(document).Toasts('create', {
        body: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.',
        title: 'Toast Title',
        subtitle: 'Subtitle',
        image: '../../dist/img/user3-128x128.jpg',
        imageAlt: 'User Picture',
      })
    });
    $('.toastsDefaultSuccess').click(function() {
      $(document).Toasts('create', {
        class: 'bg-success',
        title: 'Toast Title',
        subtitle: 'Subtitle',
        body: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
      })
    });
    $('.toastsDefaultInfo').click(function() {
      $(document).Toasts('create', {
        class: 'bg-info',
        title: 'Toast Title',
        subtitle: 'Subtitle',
        body: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
      })
    });
    $('.toastsDefaultWarning').click(function() {
      $(document).Toasts('create', {
        class: 'bg-warning',
        title: 'Toast Title',
        subtitle: 'Subtitle',
        body: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
      })
    });
    $('.toastsDefaultDanger').click(function() {
      $(document).Toasts('create', {
        class: 'bg-danger',
        title: 'Toast Title',
        subtitle: 'Subtitle',
        body: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
      })
    });
    $('.toastsDefaultMaroon').click(function() {
      $(document).Toasts('create', {
        class: 'bg-maroon',
        title: 'Toast Title',
        subtitle: 'Subtitle',
        body: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'
      })
    });
  });
</script>

{% block chart_js %}
<!--Bar Charts Scripts-->
<script>
  // Bar Chart for sales
  $(function () {
  'use strict'

  var ticksStyle = {
    fontColor: '#495057',
    fontStyle: 'bold'
  }

  var mode      = 'index'
  var intersect = true

  var $salesChart = $('#sales-chart')
  var salesChart  = new Chart($salesChart, {
    type   : 'bar',
    data   : {
      labels  : [{% for category in total_req_items_per_cat_tw %}'{{category.category}}', {% endfor %}],
      datasets: [
        {
          backgroundColor: '#28a745',
          borderColor    : '#28a745',
          data           :  [{% for category in total_req_items_per_cat_tw %}'{{category.total}}', {% endfor %}]
        },
        {
          backgroundColor: '#6c757d',
          borderColor    : '#6c757d',
          data           : [{% for category in total_req_items_per_cat_lw %}'{{category.total}}', {% endfor %}],
        }
      ]
    },
    options: {
      maintainAspectRatio: false,
      tooltips           : {
        mode     : mode,
        intersect: intersect
      },
      hover              : {
        mode     : mode,
        intersect: intersect
      },
      legend             : {
        display: false
      },
      scales             : {
        yAxes: [{
          // display: false,
          gridLines: {
            display      : true,
            lineWidth    : '4px',
            color        : 'rgba(0, 0, 0, .2)',
            zeroLineColor: 'transparent'
          },
          ticks    : $.extend({
            beginAtZero: true,

            // Include a dollar sign in the ticks
            callback: function (value, index, values) {
              // if (value >= 1000) {
              //   value /= 1000
              //   value += 'k'
              // }
              return value
            }
          }, ticksStyle)
        }],
        xAxes: [{
          display  : true,
          gridLines: {
            display: false
          },
          ticks    : ticksStyle
        }]
      }
    }
  })

  var $visitorsChart = $('#visitors-chart')
  var visitorsChart  = new Chart($visitorsChart, {
    data   : {
      labels  : ['MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT', 'SUN'],
      datasets: [{
        type                : 'line',
        data                : [{{monday_total_sales.amount}}, {{tuesday_total_sales.amount}}, {{wednesday_total_sales.amount}}, {{thursday_total_sales.amount}}, {{friday_total_sales.amount}}, {{saturday_total_sales.amount}}, {{sunday_total_sales.amount}}],
        backgroundColor     : 'transparent',
        borderColor         : '#28a745',
        pointBorderColor    : '#28a745',
        pointBackgroundColor: '#28a745',
        fill                : false
        // pointHoverBackgroundColor: '#007bff',
        // pointHoverBorderColor    : '#007bff'
      },
        {
          type                : 'line',
          data                : [{{lw_monday_total_sales.amount}}, {{lw_tuesday_total_sales.amount}}, {{lw_wednesday_total_sales.amount}}, {{lw_thursday_total_sales.amount}}, {{lw_friday_total_sales.amount}}, {{lw_saturday_total_sales.amount}}, {{lw_sunday_total_sales.amount}}],
          backgroundColor     : 'tansparent',
          borderColor         : '#6c757d',
          pointBorderColor    : '#6c757d',
          pointBackgroundColor: '#6c757d',
          fill                : false
          // pointHoverBackgroundColor: '#ced4da',
          // pointHoverBorderColor    : '#ced4da'
        }]
    },
    options: {
      maintainAspectRatio: false,
      tooltips           : {
        mode     : mode,
        intersect: intersect
      },
      hover              : {
        mode     : mode,
        intersect: intersect
      },
      legend             : {
        display: false
      },
      scales             : {
        yAxes: [{
          // display: false,
          gridLines: {
            display      : true,
            lineWidth    : '4px',
            color        : 'rgba(0, 0, 0, .2)',
            zeroLineColor: 'transparent'
          },
          ticks    : $.extend({
            beginAtZero : true,
            suggestedMax: 200,
            callback: function (value, index, values) {
              // if (value >= 1000) {
              //   value /= 1000
              //   value += 'k'
              // }
              return 'MWK ' + value
            }
          }, ticksStyle)
        }],
        xAxes: [{
          display  : true,
          gridLines: {
            display: false
          },
          ticks    : ticksStyle
        }]
      }
    }
  })
})

</script>
{% endblock chart_js %}
<!--End Bar Charts Scripts-->
{% endblock js %}